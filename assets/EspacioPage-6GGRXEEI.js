import{a as V,u as C}from"./crudFireBase-FagNTyCr.js";import{u as w,r as o,g as N,c as r,a as e,t as l,F as b,b as y,o as c,n as R,d as f,w as I,e as U,f as g}from"./index-hAXhGcfx.js";const A={class:"container mt-5"},B={class:"display-4 text-center text-primary mb-4"},L={class:"row"},F={class:"col-lg-6"},M={class:"card mb-4"},S=e("div",{class:"card-header bg-primary text-white"},[e("h2",{class:"h5 mb-0"},"Ejecutores")],-1),j={class:"card-body"},q={class:"table table-bordered table-hover"},z=e("thead",{class:"thead-dark"},[e("tr",null,[e("th",null,"Id"),e("th",null,"Nombre"),e("th",null,"Estado"),e("th",null,"Acciones")])],-1),P={class:"col-lg-6"},T={class:"card mb-4"},$=e("div",{class:"card-header bg-primary text-white"},[e("h2",{class:"h5 mb-0"},"Sensores")],-1),G={class:"card-body"},H={class:"table table-bordered table-hover"},J=e("thead",{class:"thead-dark"},[e("tr",null,[e("th",null,"Id"),e("th",null,"Nombre"),e("th",null,"Valor"),e("th",null,"Unidad de medida"),e("th",null,"Acciones")])],-1),K=["value","onClick"],x="usuarios",Y={__name:"EspacioPage",setup(O){const _=w(),d=o(""),n=o(""),h=o(""),m=o([]),v=o([]),p=o(""),i=o([]),D=()=>{try{d.value=_.currentRoute.value.params.id,n.value=_.currentRoute.value.query.espacioId}catch(a){console.error("Error al obtener ID de usuario o espacio desde la URL",a)}},k=a=>{i.value=a.data().espacios,h.value=a.data().espacios.find(s=>s.id==n.value).nombre,p.value=a.data().espacios.find(s=>s.id==n.value)||!1,m.value=p.value.ejecutores,v.value=p.value.sensores},E=a=>{const s=prompt("Ingrese el nuevo valor del sensor",a.valor);if(s){a.valor=s;const u=i.value.findIndex(t=>t.id==n.value);i.value[u].sensores=v.value,C(d.value,x,{espacios:[...i.value]})}};return N(()=>{D(),V(x,d.value,k)}),(a,s)=>{const u=U("router-link");return c(),r("div",A,[e("h1",B," Espacio - "+l(h.value),1),e("div",L,[e("div",F,[e("div",M,[S,e("div",j,[e("table",q,[z,e("tbody",null,[(c(!0),r(b,null,y(m.value,t=>(c(),r("tr",{key:t.id},[e("td",null,l(t.id),1),e("td",null,l(t.nombre),1),e("td",{class:R(t.estado?"text-success":"text-danger")},l(t.estado?"Activo":"Inactivo"),3),e("td",null,[f(u,{to:{name:"DetalleDispositivo",params:{UserId:d.value,espacioId:n.value,tipo:"ejecutores",ideje:t.id}},class:"btn btn-outline-primary btn-sm"},{default:I(()=>[g(" Ver ")]),_:2},1032,["to"])])]))),128))])])])])]),e("div",P,[e("div",T,[$,e("div",G,[e("table",H,[J,e("tbody",null,[(c(!0),r(b,null,y(v.value,t=>(c(),r("tr",{key:t.id},[e("td",null,l(t.id),1),e("td",null,l(t.nombre),1),e("td",null,[e("input",{type:"text",class:"form-control",value:t.valor,onClick:Q=>E(t),readonly:""},null,8,K)]),e("td",null,l(t.unidadMedida),1),e("td",null,[f(u,{to:{name:"DetalleDispositivo",params:{UserId:d.value,espacioId:n.value,tipo:"sensores",ideje:t.id}},class:"btn btn-outline-primary btn-sm"},{default:I(()=>[g(" Ver ")]),_:2},1032,["to"])])]))),128))])])])])])])])}}};export{Y as default};
